/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ga4/stream/route";
exports.ids = ["app/api/ga4/stream/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "dns":
/*!**********************!*\
  !*** external "dns" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("dns");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "http2":
/*!************************!*\
  !*** external "http2" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("http2");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:events");

/***/ }),

/***/ "node:process":
/*!*******************************!*\
  !*** external "node:process" ***!
  \*******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:process");

/***/ }),

/***/ "node:util":
/*!****************************!*\
  !*** external "node:util" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fga4%2Fstream%2Froute&page=%2Fapi%2Fga4%2Fstream%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fga4%2Fstream%2Froute.ts&appDir=%2FUsers%2Fjohannilsson%2FDownloads%2FDash%2FCursor%20projects%2FRiksbyggen%2FMitt%20riksbyggen%2FDashboard%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjohannilsson%2FDownloads%2FDash%2FCursor%20projects%2FRiksbyggen%2FMitt%20riksbyggen%2FDashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fga4%2Fstream%2Froute&page=%2Fapi%2Fga4%2Fstream%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fga4%2Fstream%2Froute.ts&appDir=%2FUsers%2Fjohannilsson%2FDownloads%2FDash%2FCursor%20projects%2FRiksbyggen%2FMitt%20riksbyggen%2FDashboard%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjohannilsson%2FDownloads%2FDash%2FCursor%20projects%2FRiksbyggen%2FMitt%20riksbyggen%2FDashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_johannilsson_Downloads_Dash_Cursor_projects_Riksbyggen_Mitt_riksbyggen_Dashboard_src_app_api_ga4_stream_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/ga4/stream/route.ts */ \"(rsc)/./src/app/api/ga4/stream/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ga4/stream/route\",\n        pathname: \"/api/ga4/stream\",\n        filename: \"route\",\n        bundlePath: \"app/api/ga4/stream/route\"\n    },\n    resolvedPagePath: \"/Users/johannilsson/Downloads/Dash/Cursor projects/Riksbyggen/Mitt riksbyggen/Dashboard/src/app/api/ga4/stream/route.ts\",\n    nextConfigOutput,\n    userland: _Users_johannilsson_Downloads_Dash_Cursor_projects_Riksbyggen_Mitt_riksbyggen_Dashboard_src_app_api_ga4_stream_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZnYTQlMkZzdHJlYW0lMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmdhNCUyRnN0cmVhbSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmdhNCUyRnN0cmVhbSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmpvaGFubmlsc3NvbiUyRkRvd25sb2FkcyUyRkRhc2glMkZDdXJzb3IlMjBwcm9qZWN0cyUyRlJpa3NieWdnZW4lMkZNaXR0JTIwcmlrc2J5Z2dlbiUyRkRhc2hib2FyZCUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZqb2hhbm5pbHNzb24lMkZEb3dubG9hZHMlMkZEYXNoJTJGQ3Vyc29yJTIwcHJvamVjdHMlMkZSaWtzYnlnZ2VuJTJGTWl0dCUyMHJpa3NieWdnZW4lMkZEYXNoYm9hcmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ3VFO0FBQ3BKO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvam9oYW5uaWxzc29uL0Rvd25sb2Fkcy9EYXNoL0N1cnNvciBwcm9qZWN0cy9SaWtzYnlnZ2VuL01pdHQgcmlrc2J5Z2dlbi9EYXNoYm9hcmQvc3JjL2FwcC9hcGkvZ2E0L3N0cmVhbS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZ2E0L3N0cmVhbS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dhNC9zdHJlYW1cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2dhNC9zdHJlYW0vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvam9oYW5uaWxzc29uL0Rvd25sb2Fkcy9EYXNoL0N1cnNvciBwcm9qZWN0cy9SaWtzYnlnZ2VuL01pdHQgcmlrc2J5Z2dlbi9EYXNoYm9hcmQvc3JjL2FwcC9hcGkvZ2E0L3N0cmVhbS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fga4%2Fstream%2Froute&page=%2Fapi%2Fga4%2Fstream%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fga4%2Fstream%2Froute.ts&appDir=%2FUsers%2Fjohannilsson%2FDownloads%2FDash%2FCursor%20projects%2FRiksbyggen%2FMitt%20riksbyggen%2FDashboard%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjohannilsson%2FDownloads%2FDash%2FCursor%20projects%2FRiksbyggen%2FMitt%20riksbyggen%2FDashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/ga4/stream/route.ts":
/*!*****************************************!*\
  !*** ./src/app/api/ga4/stream/route.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var _services_ga4_client_email_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/services/ga4-client-email.service */ \"(rsc)/./src/services/ga4-client-email.service.ts\");\n\nasync function GET(request) {\n    const { searchParams } = new URL(request.url);\n    const days = parseInt(searchParams.get('days') || '28');\n    const includeGrowthRates = searchParams.get('includeGrowthRates') === 'true';\n    // Create a ReadableStream for Server-Sent Events\n    const stream = new ReadableStream({\n        start (controller) {\n            const encoder = new TextEncoder();\n            // Send initial data\n            const sendData = async ()=>{\n                try {\n                    const dateRange = _services_ga4_client_email_service__WEBPACK_IMPORTED_MODULE_0__.ga4ClientEmailService.getDateRange(days);\n                    const result = await _services_ga4_client_email_service__WEBPACK_IMPORTED_MODULE_0__.ga4ClientEmailService.getMetrics(dateRange, includeGrowthRates);\n                    const data = {\n                        data: result.data,\n                        dateRange,\n                        timestamp: new Date().toISOString(),\n                        error: result.error\n                    };\n                    const message = `data: ${JSON.stringify(data)}\\n\\n`;\n                    controller.enqueue(encoder.encode(message));\n                } catch (error) {\n                    const errorData = {\n                        error: 'Failed to fetch GA4 data',\n                        data: {\n                            sessions: 0,\n                            totalUsers: 0,\n                            pageviews: 0,\n                            averageEngagementTime: 0\n                        },\n                        timestamp: new Date().toISOString()\n                    };\n                    const message = `data: ${JSON.stringify(errorData)}\\n\\n`;\n                    controller.enqueue(encoder.encode(message));\n                }\n            };\n            // Send initial data immediately\n            sendData();\n            // Set up interval to send updates every 5 minutes\n            const interval = setInterval(sendData, 5 * 60 * 1000);\n            // Clean up on close\n            request.signal.addEventListener('abort', ()=>{\n                clearInterval(interval);\n                controller.close();\n            });\n        }\n    });\n    return new Response(stream, {\n        headers: {\n            'Content-Type': 'text/event-stream',\n            'Cache-Control': 'no-cache',\n            'Connection': 'keep-alive',\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Methods': 'GET',\n            'Access-Control-Allow-Headers': 'Cache-Control'\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9nYTQvc3RyZWFtL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQzRFO0FBRXJFLGVBQWVDLElBQUlDLE9BQW9CO0lBQzVDLE1BQU0sRUFBRUMsWUFBWSxFQUFFLEdBQUcsSUFBSUMsSUFBSUYsUUFBUUcsR0FBRztJQUM1QyxNQUFNQyxPQUFPQyxTQUFTSixhQUFhSyxHQUFHLENBQUMsV0FBVztJQUNsRCxNQUFNQyxxQkFBcUJOLGFBQWFLLEdBQUcsQ0FBQywwQkFBMEI7SUFFdEUsaURBQWlEO0lBQ2pELE1BQU1FLFNBQVMsSUFBSUMsZUFBZTtRQUNoQ0MsT0FBTUMsVUFBVTtZQUNkLE1BQU1DLFVBQVUsSUFBSUM7WUFFcEIsb0JBQW9CO1lBQ3BCLE1BQU1DLFdBQVc7Z0JBQ2YsSUFBSTtvQkFDRixNQUFNQyxZQUFZakIscUZBQXFCQSxDQUFDa0IsWUFBWSxDQUFDWjtvQkFDckQsTUFBTWEsU0FBUyxNQUFNbkIscUZBQXFCQSxDQUFDb0IsVUFBVSxDQUFDSCxXQUFXUjtvQkFFakUsTUFBTVksT0FBTzt3QkFDWEEsTUFBTUYsT0FBT0UsSUFBSTt3QkFDakJKO3dCQUNBSyxXQUFXLElBQUlDLE9BQU9DLFdBQVc7d0JBQ2pDQyxPQUFPTixPQUFPTSxLQUFLO29CQUNyQjtvQkFFQSxNQUFNQyxVQUFVLENBQUMsTUFBTSxFQUFFQyxLQUFLQyxTQUFTLENBQUNQLE1BQU0sSUFBSSxDQUFDO29CQUNuRFIsV0FBV2dCLE9BQU8sQ0FBQ2YsUUFBUWdCLE1BQU0sQ0FBQ0o7Z0JBRXBDLEVBQUUsT0FBT0QsT0FBTztvQkFDZCxNQUFNTSxZQUFZO3dCQUNoQk4sT0FBTzt3QkFDUEosTUFBTTs0QkFBRVcsVUFBVTs0QkFBR0MsWUFBWTs0QkFBR0MsV0FBVzs0QkFBR0MsdUJBQXVCO3dCQUFFO3dCQUMzRWIsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO29CQUNuQztvQkFFQSxNQUFNRSxVQUFVLENBQUMsTUFBTSxFQUFFQyxLQUFLQyxTQUFTLENBQUNHLFdBQVcsSUFBSSxDQUFDO29CQUN4RGxCLFdBQVdnQixPQUFPLENBQUNmLFFBQVFnQixNQUFNLENBQUNKO2dCQUNwQztZQUNGO1lBRUEsZ0NBQWdDO1lBQ2hDVjtZQUVBLGtEQUFrRDtZQUNsRCxNQUFNb0IsV0FBV0MsWUFBWXJCLFVBQVUsSUFBSSxLQUFLO1lBRWhELG9CQUFvQjtZQUNwQmQsUUFBUW9DLE1BQU0sQ0FBQ0MsZ0JBQWdCLENBQUMsU0FBUztnQkFDdkNDLGNBQWNKO2dCQUNkdkIsV0FBVzRCLEtBQUs7WUFDbEI7UUFDRjtJQUNGO0lBRUEsT0FBTyxJQUFJQyxTQUFTaEMsUUFBUTtRQUMxQmlDLFNBQVM7WUFDUCxnQkFBZ0I7WUFDaEIsaUJBQWlCO1lBQ2pCLGNBQWM7WUFDZCwrQkFBK0I7WUFDL0IsZ0NBQWdDO1lBQ2hDLGdDQUFnQztRQUNsQztJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9qb2hhbm5pbHNzb24vRG93bmxvYWRzL0Rhc2gvQ3Vyc29yIHByb2plY3RzL1Jpa3NieWdnZW4vTWl0dCByaWtzYnlnZ2VuL0Rhc2hib2FyZC9zcmMvYXBwL2FwaS9nYTQvc3RyZWFtL3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgZ2E0Q2xpZW50RW1haWxTZXJ2aWNlIH0gZnJvbSAnQC9zZXJ2aWNlcy9nYTQtY2xpZW50LWVtYWlsLnNlcnZpY2UnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgY29uc3QgZGF5cyA9IHBhcnNlSW50KHNlYXJjaFBhcmFtcy5nZXQoJ2RheXMnKSB8fCAnMjgnKTtcbiAgY29uc3QgaW5jbHVkZUdyb3d0aFJhdGVzID0gc2VhcmNoUGFyYW1zLmdldCgnaW5jbHVkZUdyb3d0aFJhdGVzJykgPT09ICd0cnVlJztcblxuICAvLyBDcmVhdGUgYSBSZWFkYWJsZVN0cmVhbSBmb3IgU2VydmVyLVNlbnQgRXZlbnRzXG4gIGNvbnN0IHN0cmVhbSA9IG5ldyBSZWFkYWJsZVN0cmVhbSh7XG4gICAgc3RhcnQoY29udHJvbGxlcikge1xuICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgXG4gICAgICAvLyBTZW5kIGluaXRpYWwgZGF0YVxuICAgICAgY29uc3Qgc2VuZERhdGEgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZGF0ZVJhbmdlID0gZ2E0Q2xpZW50RW1haWxTZXJ2aWNlLmdldERhdGVSYW5nZShkYXlzKTtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnYTRDbGllbnRFbWFpbFNlcnZpY2UuZ2V0TWV0cmljcyhkYXRlUmFuZ2UsIGluY2x1ZGVHcm93dGhSYXRlcyk7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgIGRhdGE6IHJlc3VsdC5kYXRhLFxuICAgICAgICAgICAgZGF0ZVJhbmdlLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBlcnJvcjogcmVzdWx0LmVycm9yXG4gICAgICAgICAgfTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9XFxuXFxuYDtcbiAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoZW5jb2Rlci5lbmNvZGUobWVzc2FnZSkpO1xuICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IHtcbiAgICAgICAgICAgIGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIEdBNCBkYXRhJyxcbiAgICAgICAgICAgIGRhdGE6IHsgc2Vzc2lvbnM6IDAsIHRvdGFsVXNlcnM6IDAsIHBhZ2V2aWV3czogMCwgYXZlcmFnZUVuZ2FnZW1lbnRUaW1lOiAwIH0sXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGBkYXRhOiAke0pTT04uc3RyaW5naWZ5KGVycm9yRGF0YSl9XFxuXFxuYDtcbiAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUoZW5jb2Rlci5lbmNvZGUobWVzc2FnZSkpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBTZW5kIGluaXRpYWwgZGF0YSBpbW1lZGlhdGVseVxuICAgICAgc2VuZERhdGEoKTtcbiAgICAgIFxuICAgICAgLy8gU2V0IHVwIGludGVydmFsIHRvIHNlbmQgdXBkYXRlcyBldmVyeSA1IG1pbnV0ZXNcbiAgICAgIGNvbnN0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoc2VuZERhdGEsIDUgKiA2MCAqIDEwMDApO1xuICAgICAgXG4gICAgICAvLyBDbGVhbiB1cCBvbiBjbG9zZVxuICAgICAgcmVxdWVzdC5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBuZXcgUmVzcG9uc2Uoc3RyZWFtLCB7XG4gICAgaGVhZGVyczoge1xuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L2V2ZW50LXN0cmVhbScsXG4gICAgICAnQ2FjaGUtQ29udHJvbCc6ICduby1jYWNoZScsXG4gICAgICAnQ29ubmVjdGlvbic6ICdrZWVwLWFsaXZlJyxcbiAgICAgICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXG4gICAgICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcyc6ICdHRVQnLFxuICAgICAgJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnOiAnQ2FjaGUtQ29udHJvbCdcbiAgICB9XG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbImdhNENsaWVudEVtYWlsU2VydmljZSIsIkdFVCIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJkYXlzIiwicGFyc2VJbnQiLCJnZXQiLCJpbmNsdWRlR3Jvd3RoUmF0ZXMiLCJzdHJlYW0iLCJSZWFkYWJsZVN0cmVhbSIsInN0YXJ0IiwiY29udHJvbGxlciIsImVuY29kZXIiLCJUZXh0RW5jb2RlciIsInNlbmREYXRhIiwiZGF0ZVJhbmdlIiwiZ2V0RGF0ZVJhbmdlIiwicmVzdWx0IiwiZ2V0TWV0cmljcyIsImRhdGEiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlcnJvciIsIm1lc3NhZ2UiLCJKU09OIiwic3RyaW5naWZ5IiwiZW5xdWV1ZSIsImVuY29kZSIsImVycm9yRGF0YSIsInNlc3Npb25zIiwidG90YWxVc2VycyIsInBhZ2V2aWV3cyIsImF2ZXJhZ2VFbmdhZ2VtZW50VGltZSIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJzaWduYWwiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xlYXJJbnRlcnZhbCIsImNsb3NlIiwiUmVzcG9uc2UiLCJoZWFkZXJzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/ga4/stream/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/services/ga4-client-email.service.ts":
/*!**************************************************!*\
  !*** ./src/services/ga4-client-email.service.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ga4ClientEmailService: () => (/* binding */ ga4ClientEmailService)\n/* harmony export */ });\n/* harmony import */ var _google_analytics_data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @google-analytics/data */ \"(rsc)/./node_modules/@google-analytics/data/build/src/index.js\");\n\nclass Ga4ClientEmailService {\n    constructor(){\n        this.client = null;\n        this.propertyId = process.env.GA4_PROPERTY_ID || '';\n        if (!this.propertyId) {\n            console.error('GA4_PROPERTY_ID environment variable is not set');\n            return;\n        }\n        this.initializeClient();\n    }\n    initializeClient() {\n        try {\n            const clientEmail = process.env.GA4_CLIENT_EMAIL;\n            const privateKey = process.env.GA4_PRIVATE_KEY;\n            if (!clientEmail || !privateKey) {\n                console.error('GA4_CLIENT_EMAIL or GA4_PRIVATE_KEY environment variables are not set');\n                return;\n            }\n            // Create credentials object from environment variables\n            const credentials = {\n                type: 'service_account',\n                project_id: 'your-project-id',\n                private_key_id: 'key-id',\n                private_key: privateKey.replace(/\\\\n/g, '\\n'),\n                client_email: clientEmail,\n                client_id: 'client-id',\n                auth_uri: 'https://accounts.google.com/o/oauth2/auth',\n                token_uri: 'https://oauth2.googleapis.com/token',\n                auth_provider_x509_cert_url: 'https://www.googleapis.com/oauth2/v1/certs',\n                client_x509_cert_url: `https://www.googleapis.com/robot/v1/metadata/x509/${encodeURIComponent(clientEmail)}`\n            };\n            console.log('GA4ClientEmailService: Initializing with client email:', clientEmail);\n            this.client = new _google_analytics_data__WEBPACK_IMPORTED_MODULE_0__.BetaAnalyticsDataClient({\n                credentials\n            });\n        } catch (error) {\n            console.error('GA4ClientEmailService: Failed to initialize GA4 client:', error);\n        }\n    }\n    async getMetrics(dateRange, includeGrowthRates = false) {\n        if (!this.client) {\n            return {\n                data: {\n                    sessions: 0,\n                    totalUsers: 0,\n                    pageviews: 0,\n                    averageEngagementTime: 0\n                },\n                error: 'GA4 client not initialized'\n            };\n        }\n        try {\n            console.log(`GA4ClientEmailService: Fetching data for property: ${this.propertyId}`);\n            console.log(`GA4ClientEmailService: Date range: ${dateRange.startDate} to ${dateRange.endDate}`);\n            const [response] = await this.client.runReport({\n                property: `properties/${this.propertyId}`,\n                dateRanges: [\n                    dateRange\n                ],\n                metrics: [\n                    {\n                        name: 'sessions'\n                    },\n                    {\n                        name: 'totalUsers'\n                    },\n                    {\n                        name: 'screenPageViews'\n                    },\n                    {\n                        name: 'userEngagementDuration'\n                    }\n                ]\n            });\n            const rows = response.rows || [];\n            if (rows.length === 0) {\n                return {\n                    data: {\n                        sessions: 0,\n                        totalUsers: 0,\n                        pageviews: 0,\n                        averageEngagementTime: 0\n                    },\n                    error: 'No data found for the specified date range'\n                };\n            }\n            const aggregatedData = rows.reduce((acc, row)=>{\n                const metrics = row.metricValues || [];\n                return {\n                    sessions: acc.sessions + parseInt(metrics[0]?.value || '0'),\n                    totalUsers: acc.totalUsers + parseInt(metrics[1]?.value || '0'),\n                    pageviews: acc.pageviews + parseInt(metrics[2]?.value || '0'),\n                    userEngagementDuration: acc.userEngagementDuration + parseFloat(metrics[3]?.value || '0')\n                };\n            }, {\n                sessions: 0,\n                totalUsers: 0,\n                pageviews: 0,\n                userEngagementDuration: 0\n            });\n            let averageEngagementTime = 0;\n            if (aggregatedData.sessions > 0) {\n                averageEngagementTime = aggregatedData.userEngagementDuration / aggregatedData.sessions;\n            }\n            const currentData = {\n                sessions: aggregatedData.sessions,\n                totalUsers: aggregatedData.totalUsers,\n                pageviews: aggregatedData.pageviews,\n                averageEngagementTime: Math.round(averageEngagementTime)\n            };\n            // Calculate growth rates if requested\n            if (includeGrowthRates) {\n                const growthRates = await this.calculateGrowthRates(dateRange, currentData);\n                return {\n                    data: {\n                        ...currentData,\n                        growthRates\n                    }\n                };\n            }\n            return {\n                data: currentData\n            };\n        } catch (error) {\n            console.error('GA4ClientEmailService: Error fetching GA4 metrics:', error);\n            return {\n                data: {\n                    sessions: 0,\n                    totalUsers: 0,\n                    pageviews: 0,\n                    averageEngagementTime: 0\n                },\n                error: error instanceof Error ? error.message : 'Unknown error occurred'\n            };\n        }\n    }\n    async calculateGrowthRates(currentDateRange, currentData) {\n        try {\n            // Calculate previous period (same length as current period)\n            const currentStart = new Date(currentDateRange.startDate);\n            const currentEnd = new Date(currentDateRange.endDate);\n            const periodLength = Math.ceil((currentEnd.getTime() - currentStart.getTime()) / (1000 * 60 * 60 * 24));\n            const previousEnd = new Date(currentStart);\n            previousEnd.setDate(previousEnd.getDate() - 1);\n            const previousStart = new Date(previousEnd);\n            previousStart.setDate(previousStart.getDate() - periodLength + 1);\n            const previousDateRange = {\n                startDate: previousStart.toISOString().split('T')[0],\n                endDate: previousEnd.toISOString().split('T')[0]\n            };\n            console.log(`GA4ClientEmailService: Calculating growth rates for period ${previousDateRange.startDate} to ${previousDateRange.endDate}`);\n            // Fetch previous period data\n            const [response] = await this.client.runReport({\n                property: `properties/${this.propertyId}`,\n                dateRanges: [\n                    previousDateRange\n                ],\n                metrics: [\n                    {\n                        name: 'sessions'\n                    },\n                    {\n                        name: 'totalUsers'\n                    },\n                    {\n                        name: 'screenPageViews'\n                    },\n                    {\n                        name: 'userEngagementDuration'\n                    }\n                ]\n            });\n            const rows = response.rows || [];\n            if (rows.length === 0) {\n                console.log('GA4ClientEmailService: No previous period data found, returning zero growth rates');\n                return {\n                    sessions: 0,\n                    totalUsers: 0,\n                    pageviews: 0,\n                    averageEngagementTime: 0\n                };\n            }\n            const previousData = rows.reduce((acc, row)=>{\n                const metrics = row.metricValues || [];\n                return {\n                    sessions: acc.sessions + parseInt(metrics[0]?.value || '0'),\n                    totalUsers: acc.totalUsers + parseInt(metrics[1]?.value || '0'),\n                    pageviews: acc.pageviews + parseInt(metrics[2]?.value || '0'),\n                    userEngagementDuration: acc.userEngagementDuration + parseFloat(metrics[3]?.value || '0')\n                };\n            }, {\n                sessions: 0,\n                totalUsers: 0,\n                pageviews: 0,\n                userEngagementDuration: 0\n            });\n            let previousAverageEngagementTime = 0;\n            if (previousData.sessions > 0) {\n                previousAverageEngagementTime = previousData.userEngagementDuration / previousData.sessions;\n            }\n            // Calculate growth rates\n            const calculateGrowthRate = (current, previous)=>{\n                if (previous === 0) return current > 0 ? 100 : 0;\n                return (current - previous) / previous * 100;\n            };\n            const growthRates = {\n                sessions: calculateGrowthRate(currentData.sessions, previousData.sessions),\n                totalUsers: calculateGrowthRate(currentData.totalUsers, previousData.totalUsers),\n                pageviews: calculateGrowthRate(currentData.pageviews, previousData.pageviews),\n                averageEngagementTime: calculateGrowthRate(currentData.averageEngagementTime, previousAverageEngagementTime)\n            };\n            console.log('GA4ClientEmailService: Growth rates calculated:', growthRates);\n            return growthRates;\n        } catch (error) {\n            console.error('GA4ClientEmailService: Error calculating growth rates:', error);\n            return {\n                sessions: 0,\n                totalUsers: 0,\n                pageviews: 0,\n                averageEngagementTime: 0\n            };\n        }\n    }\n    getDateRange(days = 30) {\n        const endDate = new Date();\n        const startDate = new Date();\n        startDate.setDate(endDate.getDate() - days);\n        return {\n            startDate: startDate.toISOString().split('T')[0],\n            endDate: endDate.toISOString().split('T')[0]\n        };\n    }\n}\nconst ga4ClientEmailService = new Ga4ClientEmailService();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvc2VydmljZXMvZ2E0LWNsaWVudC1lbWFpbC5zZXJ2aWNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWlFO0FBb0JqRSxNQUFNQztJQUlKQyxhQUFjO2FBSE5DLFNBQXlDO1FBSS9DLElBQUksQ0FBQ0MsVUFBVSxHQUFHQyxRQUFRQyxHQUFHLENBQUNDLGVBQWUsSUFBSTtRQUVqRCxJQUFJLENBQUMsSUFBSSxDQUFDSCxVQUFVLEVBQUU7WUFDcEJJLFFBQVFDLEtBQUssQ0FBQztZQUNkO1FBQ0Y7UUFFQSxJQUFJLENBQUNDLGdCQUFnQjtJQUN2QjtJQUVRQSxtQkFBbUI7UUFDekIsSUFBSTtZQUNGLE1BQU1DLGNBQWNOLFFBQVFDLEdBQUcsQ0FBQ00sZ0JBQWdCO1lBQ2hELE1BQU1DLGFBQWFSLFFBQVFDLEdBQUcsQ0FBQ1EsZUFBZTtZQUU5QyxJQUFJLENBQUNILGVBQWUsQ0FBQ0UsWUFBWTtnQkFDL0JMLFFBQVFDLEtBQUssQ0FBQztnQkFDZDtZQUNGO1lBRUEsdURBQXVEO1lBQ3ZELE1BQU1NLGNBQWM7Z0JBQ2xCQyxNQUFNO2dCQUNOQyxZQUFZO2dCQUNaQyxnQkFBZ0I7Z0JBQ2hCQyxhQUFhTixXQUFXTyxPQUFPLENBQUMsUUFBUTtnQkFDeENDLGNBQWNWO2dCQUNkVyxXQUFXO2dCQUNYQyxVQUFVO2dCQUNWQyxXQUFXO2dCQUNYQyw2QkFBNkI7Z0JBQzdCQyxzQkFBc0IsQ0FBQyxrREFBa0QsRUFBRUMsbUJBQW1CaEIsY0FBYztZQUM5RztZQUVBSCxRQUFRb0IsR0FBRyxDQUFDLDBEQUEwRGpCO1lBQ3RFLElBQUksQ0FBQ1IsTUFBTSxHQUFHLElBQUlILDJFQUF1QkEsQ0FBQztnQkFBRWU7WUFBWTtRQUMxRCxFQUFFLE9BQU9OLE9BQU87WUFDZEQsUUFBUUMsS0FBSyxDQUFDLDJEQUEyREE7UUFDM0U7SUFDRjtJQUVBLE1BQU1vQixXQUFXQyxTQUFpRCxFQUFFQyxxQkFBOEIsS0FBSyxFQUErQjtRQUNwSSxJQUFJLENBQUMsSUFBSSxD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RUFBRTRDLGFBQWE1QyxRQUFRO2dCQUN6RUMsWUFBWTZDLG9CQUFvQnZCLFlBQVl0QixVQUFVLEVBQUUyQyxhQUFhM0MsVUFBVTtnQkFDL0VDLFdBQVc0QyxvQkFBb0J2QixZQUFZckIsU0FBUyxFQUFFMEMsYUFBYTFDLFNBQVM7Z0JBQzVFQyx1QkFBdUIyQyxvQkFBb0J2QixZQUFZcEIscUJBQXFCLEVBQUUwQztZQUNoRjtZQUVBdEUsUUFBUW9CLEdBQUcsQ0FBQyxtREFBbUQrQjtZQUMvRCxPQUFPQTtRQUVULEVBQUUsT0FBT2xELE9BQU87WUFDZEQsUUFBUUMsS0FBSyxDQUFDLDBEQUEwREE7WUFDeEUsT0FBTztnQkFDTHdCLFVBQVU7Z0JBQ1ZDLFlBQVk7Z0JBQ1pDLFdBQVc7Z0JBQ1hDLHVCQUF1QjtZQUN6QjtRQUNGO0lBQ0Y7SUFFQThDLGFBQWFDLE9BQWUsRUFBRSxFQUEwQztRQUN0RSxNQUFNN0MsVUFBVSxJQUFJMkI7UUFDcEIsTUFBTTVCLFlBQVksSUFBSTRCO1FBQ3RCNUIsVUFBVWtDLE9BQU8sQ0FBQ2pDLFFBQVFrQyxPQUFPLEtBQUtXO1FBRXRDLE9BQU87WUFDTDlDLFdBQVdBLFVBQVVzQyxXQUFXLEdBQUdDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtZQUNoRHRDLFNBQVNBLFFBQVFxQyxXQUFXLEdBQUdDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUM5QztJQUNGO0FBQ0Y7QUFFTyxNQUFNUSx3QkFBd0IsSUFBSW5GLHdCQUF3QiIsInNvdXJjZXMiOlsiL1VzZXJzL2pvaGFubmlsc3Nvbi9Eb3dubG9hZHMvRGFzaC9DdXJzb3IgcHJvamVjdHMvUmlrc2J5Z2dlbi9NaXR0IHJpa3NieWdnZW4vRGFzaGJvYXJkL3NyYy9zZXJ2aWNlcy9nYTQtY2xpZW50LWVtYWlsLnNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmV0YUFuYWx5dGljc0RhdGFDbGllbnQgfSBmcm9tICdAZ29vZ2xlLWFuYWx5dGljcy9kYXRhJztcblxuZXhwb3J0IGludGVyZmFjZSBHYTRNZXRyaWNzIHtcbiAgc2Vzc2lvbnM6IG51bWJlcjtcbiAgdG90YWxVc2VyczogbnVtYmVyO1xuICBwYWdldmlld3M6IG51bWJlcjtcbiAgYXZlcmFnZUVuZ2FnZW1lbnRUaW1lOiBudW1iZXI7XG4gIGdyb3d0aFJhdGVzPzoge1xuICAgIHNlc3Npb25zOiBudW1iZXI7XG4gICAgdG90YWxVc2VyczogbnVtYmVyO1xuICAgIHBhZ2V2aWV3czogbnVtYmVyO1xuICAgIGF2ZXJhZ2VFbmdhZ2VtZW50VGltZTogbnVtYmVyO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdhNE1ldHJpY3NSZXNwb25zZSB7XG4gIGRhdGE6IEdhNE1ldHJpY3M7XG4gIGVycm9yPzogc3RyaW5nO1xufVxuXG5jbGFzcyBHYTRDbGllbnRFbWFpbFNlcnZpY2Uge1xuICBwcml2YXRlIGNsaWVudDogQmV0YUFuYWx5dGljc0RhdGFDbGllbnQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBwcm9wZXJ0eUlkOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wcm9wZXJ0eUlkID0gcHJvY2Vzcy5lbnYuR0E0X1BST1BFUlRZX0lEIHx8ICcnO1xuICAgIFxuICAgIGlmICghdGhpcy5wcm9wZXJ0eUlkKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdHQTRfUFJPUEVSVFlfSUQgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbm90IHNldCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuaW5pdGlhbGl6ZUNsaWVudCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplQ2xpZW50KCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjbGllbnRFbWFpbCA9IHByb2Nlc3MuZW52LkdBNF9DTElFTlRfRU1BSUw7XG4gICAgICBjb25zdCBwcml2YXRlS2V5ID0gcHJvY2Vzcy5lbnYuR0E0X1BSSVZBVEVfS0VZO1xuXG4gICAgICBpZiAoIWNsaWVudEVtYWlsIHx8ICFwcml2YXRlS2V5KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dBNF9DTElFTlRfRU1BSUwgb3IgR0E0X1BSSVZBVEVfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgbm90IHNldCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBjcmVkZW50aWFscyBvYmplY3QgZnJvbSBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgICAgIGNvbnN0IGNyZWRlbnRpYWxzID0ge1xuICAgICAgICB0eXBlOiAnc2VydmljZV9hY2NvdW50JyxcbiAgICAgICAgcHJvamVjdF9pZDogJ3lvdXItcHJvamVjdC1pZCcsIC8vIFRoaXMgY2FuIGJlIGV4dHJhY3RlZCBmcm9tIGNsaWVudF9lbWFpbCBpZiBuZWVkZWRcbiAgICAgICAgcHJpdmF0ZV9rZXlfaWQ6ICdrZXktaWQnLCAvLyBPcHRpb25hbFxuICAgICAgICBwcml2YXRlX2tleTogcHJpdmF0ZUtleS5yZXBsYWNlKC9cXFxcbi9nLCAnXFxuJyksIC8vIFJlcGxhY2UgXFxuIHdpdGggYWN0dWFsIG5ld2xpbmVzXG4gICAgICAgIGNsaWVudF9lbWFpbDogY2xpZW50RW1haWwsXG4gICAgICAgIGNsaWVudF9pZDogJ2NsaWVudC1pZCcsIC8vIE9wdGlvbmFsXG4gICAgICAgIGF1dGhfdXJpOiAnaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgnLFxuICAgICAgICB0b2tlbl91cmk6ICdodHRwczovL29hdXRoMi5nb29nbGVhcGlzLmNvbS90b2tlbicsXG4gICAgICAgIGF1dGhfcHJvdmlkZXJfeDUwOV9jZXJ0X3VybDogJ2h0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92MS9jZXJ0cycsXG4gICAgICAgIGNsaWVudF94NTA5X2NlcnRfdXJsOiBgaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vcm9ib3QvdjEvbWV0YWRhdGEveDUwOS8ke2VuY29kZVVSSUNvbXBvbmVudChjbGllbnRFbWFpbCl9YFxuICAgICAgfTtcblxuICAgICAgY29uc29sZS5sb2coJ0dBNENsaWVudEVtYWlsU2VydmljZTogSW5pdGlhbGl6aW5nIHdpdGggY2xpZW50IGVtYWlsOicsIGNsaWVudEVtYWlsKTtcbiAgICAgIHRoaXMuY2xpZW50ID0gbmV3IEJldGFBbmFseXRpY3NEYXRhQ2xpZW50KHsgY3JlZGVudGlhbHMgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0dBNENsaWVudEVtYWlsU2VydmljZTogRmFpbGVkIHRvIGluaXRpYWxpemUgR0E0IGNsaWVudDonLCBlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0TWV0cmljcyhkYXRlUmFuZ2U6IHsgc3RhcnREYXRlOiBzdHJpbmc7IGVuZERhdGU6IHN0cmluZyB9LCBpbmNsdWRlR3Jvd3RoUmF0ZXM6IGJvb2xlYW4gPSBmYWxzZSk6IFByb21pc2U8R2E0TWV0cmljc1Jlc3BvbnNlPiB7XG4gICAgaWYgKCF0aGlzLmNsaWVudCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogeyBzZXNzaW9uczogMCwgdG90YWxVc2VyczogMCwgcGFnZXZpZXdzOiAwLCBhdmVyYWdlRW5nYWdlbWVudFRpbWU6IDAgfSxcbiAgICAgICAgZXJyb3I6ICdHQTQgY2xpZW50IG5vdCBpbml0aWFsaXplZCdcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKGBHQTRDbGllbnRFbWFpbFNlcnZpY2U6IEZldGNoaW5nIGRhdGEgZm9yIHByb3BlcnR5OiAke3RoaXMucHJvcGVydHlJZH1gKTtcbiAgICAgIGNvbnNvbGUubG9nKGBHQTRDbGllbnRFbWFpbFNlcnZpY2U6IERhdGUgcmFuZ2U6ICR7ZGF0ZVJhbmdlLnN0YXJ0RGF0ZX0gdG8gJHtkYXRlUmFuZ2UuZW5kRGF0ZX1gKTtcbiAgICAgIFxuICAgICAgY29uc3QgW3Jlc3BvbnNlXSA9IGF3YWl0IHRoaXMuY2xpZW50LnJ1blJlcG9ydCh7XG4gICAgICAgIHByb3BlcnR5OiBgcHJvcGVydGllcy8ke3RoaXMucHJvcGVydHlJZH1gLFxuICAgICAgICBkYXRlUmFuZ2VzOiBbZGF0ZVJhbmdlXSxcbiAgICAgICAgbWV0cmljczogW1xuICAgICAgICAgIHsgbmFtZTogJ3Nlc3Npb25zJyB9LFxuICAgICAgICAgIHsgbmFtZTogJ3RvdGFsVXNlcnMnIH0sXG4gICAgICAgICAgeyBuYW1lOiAnc2NyZWVuUGFnZVZpZXdzJyB9LFxuICAgICAgICAgIHsgbmFtZTogJ3VzZXJFbmdhZ2VtZW50RHVyYXRpb24nIH1cbiAgICAgICAgXVxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJvd3MgPSByZXNwb25zZS5yb3dzIHx8IFtdO1xuICAgICAgaWYgKHJvd3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZGF0YTogeyBzZXNzaW9uczogMCwgdG90YWxVc2VyczogMCwgcGFnZXZpZXdzOiAwLCBhdmVyYWdlRW5nYWdlbWVudFRpbWU6IDAgfSxcbiAgICAgICAgICBlcnJvcjogJ05vIGRhdGEgZm91bmQgZm9yIHRoZSBzcGVjaWZpZWQgZGF0ZSByYW5nZSdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYWdncmVnYXRlZERhdGEgPSByb3dzLnJlZHVjZSgoYWNjLCByb3cpID0+IHtcbiAgICAgICAgY29uc3QgbWV0cmljcyA9IHJvdy5tZXRyaWNWYWx1ZXMgfHwgW107XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2Vzc2lvbnM6IGFjYy5zZXNzaW9ucyArIHBhcnNlSW50KG1ldHJpY3NbMF0/LnZhbHVlIHx8ICcwJyksXG4gICAgICAgICAgdG90YWxVc2VyczogYWNjLnRvdGFsVXNlcnMgKyBwYXJzZUludChtZXRyaWNzWzFdPy52YWx1ZSB8fCAnMCcpLFxuICAgICAgICAgIHBhZ2V2aWV3czogYWNjLnBhZ2V2aWV3cyArIHBhcnNlSW50KG1ldHJpY3NbMl0/LnZhbHVlIHx8ICcwJyksXG4gICAgICAgICAgdXNlckVuZ2FnZW1lbnREdXJhdGlvbjogYWNjLnVzZXJFbmdhZ2VtZW50RHVyYXRpb24gKyBwYXJzZUZsb2F0KG1ldHJpY3NbM10/LnZhbHVlIHx8ICcwJylcbiAgICAgICAgfTtcbiAgICAgIH0sIHsgc2Vzc2lvbnM6IDAsIHRvdGFsVXNlcnM6IDAsIHBhZ2V2aWV3czogMCwgdXNlckVuZ2FnZW1lbnREdXJhdGlvbjogMCB9KTtcblxuICAgICAgbGV0IGF2ZXJhZ2VFbmdhZ2VtZW50VGltZSA9IDA7XG4gICAgICBpZiAoYWdncmVnYXRlZERhdGEuc2Vzc2lvbnMgPiAwKSB7XG4gICAgICAgIGF2ZXJhZ2VFbmdhZ2VtZW50VGltZSA9IGFnZ3JlZ2F0ZWREYXRhLnVzZXJFbmdhZ2VtZW50RHVyYXRpb24gLyBhZ2dyZWdhdGVkRGF0YS5zZXNzaW9ucztcbiAgICAgIH1cblxuICAgICAgY29uc3QgY3VycmVudERhdGEgPSB7XG4gICAgICAgIHNlc3Npb25zOiBhZ2dyZWdhdGVkRGF0YS5zZXNzaW9ucyxcbiAgICAgICAgdG90YWxVc2VyczogYWdncmVnYXRlZERhdGEudG90YWxVc2VycyxcbiAgICAgICAgcGFnZXZpZXdzOiBhZ2dyZWdhdGVkRGF0YS5wYWdldmlld3MsXG4gICAgICAgIGF2ZXJhZ2VFbmdhZ2VtZW50VGltZTogTWF0aC5yb3VuZChhdmVyYWdlRW5nYWdlbWVudFRpbWUpXG4gICAgICB9O1xuXG4gICAgICAvLyBDYWxjdWxhdGUgZ3Jvd3RoIHJhdGVzIGlmIHJlcXVlc3RlZFxuICAgICAgaWYgKGluY2x1ZGVHcm93dGhSYXRlcykge1xuICAgICAgICBjb25zdCBncm93dGhSYXRlcyA9IGF3YWl0IHRoaXMuY2FsY3VsYXRlR3Jvd3RoUmF0ZXMoZGF0ZVJhbmdlLCBjdXJyZW50RGF0YSk7XG4gICAgICAgIHJldHVybiB7IFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIC4uLmN1cnJlbnREYXRhLFxuICAgICAgICAgICAgZ3Jvd3RoUmF0ZXNcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IFxuICAgICAgICBkYXRhOiBjdXJyZW50RGF0YVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignR0E0Q2xpZW50RW1haWxTZXJ2aWNlOiBFcnJvciBmZXRjaGluZyBHQTQgbWV0cmljczonLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiB7IHNlc3Npb25zOiAwLCB0b3RhbFVzZXJzOiAwLCBwYWdldmlld3M6IDAsIGF2ZXJhZ2VFbmdhZ2VtZW50VGltZTogMCB9LFxuICAgICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCdcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBjYWxjdWxhdGVHcm93dGhSYXRlcyhjdXJyZW50RGF0ZVJhbmdlOiB7IHN0YXJ0RGF0ZTogc3RyaW5nOyBlbmREYXRlOiBzdHJpbmcgfSwgY3VycmVudERhdGE6IGFueSkge1xuICAgIHRyeSB7XG4gICAgICAvLyBDYWxjdWxhdGUgcHJldmlvdXMgcGVyaW9kIChzYW1lIGxlbmd0aCBhcyBjdXJyZW50IHBlcmlvZClcbiAgICAgIGNvbnN0IGN1cnJlbnRTdGFydCA9IG5ldyBEYXRlKGN1cnJlbnREYXRlUmFuZ2Uuc3RhcnREYXRlKTtcbiAgICAgIGNvbnN0IGN1cnJlbnRFbmQgPSBuZXcgRGF0ZShjdXJyZW50RGF0ZVJhbmdlLmVuZERhdGUpO1xuICAgICAgY29uc3QgcGVyaW9kTGVuZ3RoID0gTWF0aC5jZWlsKChjdXJyZW50RW5kLmdldFRpbWUoKSAtIGN1cnJlbnRTdGFydC5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcbiAgICAgIFxuICAgICAgY29uc3QgcHJldmlvdXNFbmQgPSBuZXcgRGF0ZShjdXJyZW50U3RhcnQpO1xuICAgICAgcHJldmlvdXNFbmQuc2V0RGF0ZShwcmV2aW91c0VuZC5nZXREYXRlKCkgLSAxKTtcbiAgICAgIGNvbnN0IHByZXZpb3VzU3RhcnQgPSBuZXcgRGF0ZShwcmV2aW91c0VuZCk7XG4gICAgICBwcmV2aW91c1N0YXJ0LnNldERhdGUocHJldmlvdXNTdGFydC5nZXREYXRlKCkgLSBwZXJpb2RMZW5ndGggKyAxKTtcblxuICAgICAgY29uc3QgcHJldmlvdXNEYXRlUmFuZ2UgPSB7XG4gICAgICAgIHN0YXJ0RGF0ZTogcHJldmlvdXNTdGFydC50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0sXG4gICAgICAgIGVuZERhdGU6IHByZXZpb3VzRW5kLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXVxuICAgICAgfTtcblxuICAgICAgY29uc29sZS5sb2coYEdBNENsaWVudEVtYWlsU2VydmljZTogQ2FsY3VsYXRpbmcgZ3Jvd3RoIHJhdGVzIGZvciBwZXJpb2QgJHtwcmV2aW91c0RhdGVSYW5nZS5zdGFydERhdGV9IHRvICR7cHJldmlvdXNEYXRlUmFuZ2UuZW5kRGF0ZX1gKTtcblxuICAgICAgLy8gRmV0Y2ggcHJldmlvdXMgcGVyaW9kIGRhdGFcbiAgICAgIGNvbnN0IFtyZXNwb25zZV0gPSBhd2FpdCB0aGlzLmNsaWVudCEucnVuUmVwb3J0KHtcbiAgICAgICAgcHJvcGVydHk6IGBwcm9wZXJ0aWVzLyR7dGhpcy5wcm9wZXJ0eUlkfWAsXG4gICAgICAgIGRhdGVSYW5nZXM6IFtwcmV2aW91c0RhdGVSYW5nZV0sXG4gICAgICAgIG1ldHJpY3M6IFtcbiAgICAgICAgICB7IG5hbWU6ICdzZXNzaW9ucycgfSxcbiAgICAgICAgICB7IG5hbWU6ICd0b3RhbFVzZXJzJyB9LFxuICAgICAgICAgIHsgbmFtZTogJ3NjcmVlblBhZ2VWaWV3cycgfSxcbiAgICAgICAgICB7IG5hbWU6ICd1c2VyRW5nYWdlbWVudER1cmF0aW9uJyB9XG4gICAgICAgIF1cbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByb3dzID0gcmVzcG9uc2Uucm93cyB8fCBbXTtcbiAgICAgIGlmIChyb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLmxvZygnR0E0Q2xpZW50RW1haWxTZXJ2aWNlOiBObyBwcmV2aW91cyBwZXJpb2QgZGF0YSBmb3VuZCwgcmV0dXJuaW5nIHplcm8gZ3Jvd3RoIHJhdGVzJyk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2Vzc2lvbnM6IDAsXG4gICAgICAgICAgdG90YWxVc2VyczogMCxcbiAgICAgICAgICBwYWdldmlld3M6IDAsXG4gICAgICAgICAgYXZlcmFnZUVuZ2FnZW1lbnRUaW1lOiAwXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByZXZpb3VzRGF0YSA9IHJvd3MucmVkdWNlKChhY2MsIHJvdykgPT4ge1xuICAgICAgICBjb25zdCBtZXRyaWNzID0gcm93Lm1ldHJpY1ZhbHVlcyB8fCBbXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzZXNzaW9uczogYWNjLnNlc3Npb25zICsgcGFyc2VJbnQobWV0cmljc1swXT8udmFsdWUgfHwgJzAnKSxcbiAgICAgICAgICB0b3RhbFVzZXJzOiBhY2MudG90YWxVc2VycyArIHBhcnNlSW50KG1ldHJpY3NbMV0/LnZhbHVlIHx8ICcwJyksXG4gICAgICAgICAgcGFnZXZpZXdzOiBhY2MucGFnZXZpZXdzICsgcGFyc2VJbnQobWV0cmljc1syXT8udmFsdWUgfHwgJzAnKSxcbiAgICAgICAgICB1c2VyRW5nYWdlbWVudER1cmF0aW9uOiBhY2MudXNlckVuZ2FnZW1lbnREdXJhdGlvbiArIHBhcnNlRmxvYXQobWV0cmljc1szXT8udmFsdWUgfHwgJzAnKVxuICAgICAgICB9O1xuICAgICAgfSwgeyBzZXNzaW9uczogMCwgdG90YWxVc2VyczogMCwgcGFnZXZpZXdzOiAwLCB1c2VyRW5nYWdlbWVudER1cmF0aW9uOiAwIH0pO1xuXG4gICAgICBsZXQgcHJldmlvdXNBdmVyYWdlRW5nYWdlbWVudFRpbWUgPSAwO1xuICAgICAgaWYgKHByZXZpb3VzRGF0YS5zZXNzaW9ucyA+IDApIHtcbiAgICAgICAgcHJldmlvdXNBdmVyYWdlRW5nYWdlbWVudFRpbWUgPSBwcmV2aW91c0RhdGEudXNlckVuZ2FnZW1lbnREdXJhdGlvbiAvIHByZXZpb3VzRGF0YS5zZXNzaW9ucztcbiAgICAgIH1cblxuICAgICAgLy8gQ2FsY3VsYXRlIGdyb3d0aCByYXRlc1xuICAgICAgY29uc3QgY2FsY3VsYXRlR3Jvd3RoUmF0ZSA9IChjdXJyZW50OiBudW1iZXIsIHByZXZpb3VzOiBudW1iZXIpID0+IHtcbiAgICAgICAgaWYgKHByZXZpb3VzID09PSAwKSByZXR1cm4gY3VycmVudCA+IDAgPyAxMDAgOiAwO1xuICAgICAgICByZXR1cm4gKChjdXJyZW50IC0gcHJldmlvdXMpIC8gcHJldmlvdXMpICogMTAwO1xuICAgICAgfTtcblxuICAgICAgY29uc3QgZ3Jvd3RoUmF0ZXMgPSB7XG4gICAgICAgIHNlc3Npb25zOiBjYWxjdWxhdGVHcm93dGhSYXRlKGN1cnJlbnREYXRhLnNlc3Npb25zLCBwcmV2aW91c0RhdGEuc2Vzc2lvbnMpLFxuICAgICAgICB0b3RhbFVzZXJzOiBjYWxjdWxhdGVHcm93dGhSYXRlKGN1cnJlbnREYXRhLnRvdGFsVXNlcnMsIHByZXZpb3VzRGF0YS50b3RhbFVzZXJzKSxcbiAgICAgICAgcGFnZXZpZXdzOiBjYWxjdWxhdGVHcm93dGhSYXRlKGN1cnJlbnREYXRhLnBhZ2V2aWV3cywgcHJldmlvdXNEYXRhLnBhZ2V2aWV3cyksXG4gICAgICAgIGF2ZXJhZ2VFbmdhZ2VtZW50VGltZTogY2FsY3VsYXRlR3Jvd3RoUmF0ZShjdXJyZW50RGF0YS5hdmVyYWdlRW5nYWdlbWVudFRpbWUsIHByZXZpb3VzQXZlcmFnZUVuZ2FnZW1lbnRUaW1lKVxuICAgICAgfTtcblxuICAgICAgY29uc29sZS5sb2coJ0dBNENsaWVudEVtYWlsU2VydmljZTogR3Jvd3RoIHJhdGVzIGNhbGN1bGF0ZWQ6JywgZ3Jvd3RoUmF0ZXMpO1xuICAgICAgcmV0dXJuIGdyb3d0aFJhdGVzO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0dBNENsaWVudEVtYWlsU2VydmljZTogRXJyb3IgY2FsY3VsYXRpbmcgZ3Jvd3RoIHJhdGVzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHNlc3Npb25zOiAwLFxuICAgICAgICB0b3RhbFVzZXJzOiAwLFxuICAgICAgICBwYWdldmlld3M6IDAsXG4gICAgICAgIGF2ZXJhZ2VFbmdhZ2VtZW50VGltZTogMFxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBnZXREYXRlUmFuZ2UoZGF5czogbnVtYmVyID0gMzApOiB7IHN0YXJ0RGF0ZTogc3RyaW5nOyBlbmREYXRlOiBzdHJpbmcgfSB7XG4gICAgY29uc3QgZW5kRGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3Qgc3RhcnREYXRlID0gbmV3IERhdGUoKTtcbiAgICBzdGFydERhdGUuc2V0RGF0ZShlbmREYXRlLmdldERhdGUoKSAtIGRheXMpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0RGF0ZTogc3RhcnREYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXSxcbiAgICAgIGVuZERhdGU6IGVuZERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgZ2E0Q2xpZW50RW1haWxTZXJ2aWNlID0gbmV3IEdhNENsaWVudEVtYWlsU2VydmljZSgpO1xuIl0sIm5hbWVzIjpbIkJldGFBbmFseXRpY3NEYXRhQ2xpZW50IiwiR2E0Q2xpZW50RW1haWxTZXJ2aWNlIiwiY29uc3RydWN0b3IiLCJjbGllbnQiLCJwcm9wZXJ0eUlkIiwicHJvY2VzcyIsImVudiIsIkdBNF9QUk9QRVJUWV9JRCIsImNvbnNvbGUiLCJlcnJvciIsImluaXRpYWxpemVDbGllbnQiLCJjbGllbnRFbWFpbCIsIkdBNF9DTElFTlRfRU1BSUwiLCJwcml2YXRlS2V5IiwiR0E0X1BSSVZBVEVfS0VZIiwiY3JlZGVudGlhbHMiLCJ0eXBlIiwicHJvamVjdF9pZCIsInByaXZhdGVfa2V5X2lkIiwicHJpdmF0ZV9rZXkiLCJyZXBsYWNlIiwiY2xpZW50X2VtYWlsIiwiY2xpZW50X2lkIiwiYXV0aF91cmkiLCJ0b2tlbl91cmkiLCJhdXRoX3Byb3ZpZGVyX3g1MDlfY2VydF91cmwiLCJjbGllbnRfeDUwOV9jZXJ0X3VybCIsImVuY29kZVVSSUNvbXBvbmVudCIsImxvZyIsImdldE1ldHJpY3MiLCJkYXRlUmFuZ2UiLCJpbmNsdWRlR3Jvd3RoUmF0ZXMiLCJkYXRhIiwic2Vzc2lvbnMiLCJ0b3RhbFVzZXJzIiwicGFnZXZpZXdzIiwiYXZlcmFnZUVuZ2FnZW1lbnRUaW1lIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInJlc3BvbnNlIiwicnVuUmVwb3J0IiwicHJvcGVydHkiLCJkYXRlUmFuZ2VzIiwibWV0cmljcyIsIm5hbWUiLCJyb3dzIiwibGVuZ3RoIiwiYWdncmVnYXRlZERhdGEiLCJyZWR1Y2UiLCJhY2MiLCJyb3ciLCJtZXRyaWNWYWx1ZXMiLCJwYXJzZUludCIsInZhbHVlIiwidXNlckVuZ2FnZW1lbnREdXJhdGlvbiIsInBhcnNlRmxvYXQiLCJjdXJyZW50RGF0YSIsIk1hdGgiLCJyb3VuZCIsImdyb3d0aFJhdGVzIiwiY2FsY3VsYXRlR3Jvd3RoUmF0ZXMiLCJFcnJvciIsIm1lc3NhZ2UiLCJjdXJyZW50RGF0ZVJhbmdlIiwiY3VycmVudFN0YXJ0IiwiRGF0ZSIsImN1cnJlbnRFbmQiLCJwZXJpb2RMZW5ndGgiLCJjZWlsIiwiZ2V0VGltZSIsInByZXZpb3VzRW5kIiwic2V0RGF0ZSIsImdldERhdGUiLCJwcmV2aW91c1N0YXJ0IiwicHJldmlvdXNEYXRlUmFuZ2UiLCJ0b0lTT1N0cmluZyIsInNwbGl0IiwicHJldmlvdXNEYXRhIiwicHJldmlvdXNBdmVyYWdlRW5nYWdlbWVudFRpbWUiLCJjYWxjdWxhdGVHcm93dGhSYXRlIiwiY3VycmVudCIsInByZXZpb3VzIiwiZ2V0RGF0ZVJhbmdlIiwiZGF5cyIsImdhNENsaWVudEVtYWlsU2VydmljZSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/services/ga4-client-email.service.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@grpc","vendor-chunks/google-gax","vendor-chunks/protobufjs","vendor-chunks/google-auth-library","vendor-chunks/uuid","vendor-chunks/readable-stream","vendor-chunks/proto3-json-serializer","vendor-chunks/@protobufjs","vendor-chunks/@google-analytics","vendor-chunks/gaxios","vendor-chunks/whatwg-url","vendor-chunks/jws","vendor-chunks/debug","vendor-chunks/json-bigint","vendor-chunks/google-logging-utils","vendor-chunks/tr46","vendor-chunks/inherits","vendor-chunks/https-proxy-agent","vendor-chunks/gcp-metadata","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/agent-base","vendor-chunks/node-fetch","vendor-chunks/long","vendor-chunks/wrappy","vendor-chunks/webidl-conversions","vendor-chunks/util-deprecate","vendor-chunks/supports-color","vendor-chunks/string_decoder","vendor-chunks/stream-shift","vendor-chunks/safe-buffer","vendor-chunks/retry-request","vendor-chunks/once","vendor-chunks/object-hash","vendor-chunks/ms","vendor-chunks/lodash.camelcase","vendor-chunks/jwa","vendor-chunks/is-stream","vendor-chunks/has-flag","vendor-chunks/gtoken","vendor-chunks/extend","vendor-chunks/event-target-shim","vendor-chunks/end-of-stream","vendor-chunks/duplexify","vendor-chunks/buffer-equal-constant-time","vendor-chunks/bignumber.js","vendor-chunks/base64-js","vendor-chunks/abort-controller","vendor-chunks/@js-sdsl"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fga4%2Fstream%2Froute&page=%2Fapi%2Fga4%2Fstream%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fga4%2Fstream%2Froute.ts&appDir=%2FUsers%2Fjohannilsson%2FDownloads%2FDash%2FCursor%20projects%2FRiksbyggen%2FMitt%20riksbyggen%2FDashboard%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjohannilsson%2FDownloads%2FDash%2FCursor%20projects%2FRiksbyggen%2FMitt%20riksbyggen%2FDashboard&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();